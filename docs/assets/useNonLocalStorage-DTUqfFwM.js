import{r as c}from"./iframe-QT8oHMxz.js";import{e as d}from"./theme-XIYBvMck.js";function $(h,r,y){const[m,u]=c.useState(),[p,f]=c.useState(),[I,a]=c.useState(!0),n=d({...y?.instanceOptions,id:h},y?.credentials),g=y?.bind??!0;if(c.useEffect(()=>{if(!n)return;a(!0);try{(async function(t,e,o){let i;typeof e=="string"?(i=await t.getItem(e),o&&o({[`${e}`]:i})):(i=await t.getItems(e),o&&o(i))})(n,r,t=>{u(t),a(!1)})}catch(t){f(t),a(!1)}const s={};return g&&(Array.isArray(r)?r:[r]).forEach(t=>{const e=(o=>function(i){u(l=>({...l,[`${o}`]:i}))})(t);s[t]=e,n.on("setItem",t,e)}),()=>{g&&Object.keys(s).forEach(t=>{n.off("setItem",t,s[t])})}},[r]),typeof r=="string"){const s=async()=>{a(!0);try{const e=await n.getItem(r);return a(!1),e}catch(e){f(e),a(!1)}},t=e=>{e&&u(o=>({...o,[`${r}`]:e}))};return[n,m?m[r]:void 0,t,s,p,f,I]}return[n,m,u,async()=>{a(!0);try{const s=await n.getItems(r);return a(!1),s}catch(s){f(s),a(!1)}},p,f,I]}export{$ as e};
